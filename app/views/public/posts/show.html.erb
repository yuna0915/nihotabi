<div class="d-flex justify-content-center">
  <div style="max-width: 880px; width: 100%;">

    <!-- ÊäïÁ®øË©≥Á¥∞„ÅÆÂÖ±ÈÄöÈÉ®ÂàÜ -->
    <%= render partial: 'public/posts/post_detail', locals: { post: @post } %>

    <!-- Âú∞Âõ≥Ë°®Á§∫ -->
    <div class="my-4">
      <h5 class="mt-4 mb-2">üìç „Åì„ÅÆÊäïÁ®ø„ÅÆÂ†¥ÊâÄ</h5>
      <div id="post-map" style="height: 300px; width: 100%;"></div>
      <script>
        window.postLocation = {
          lat: <%= @post.latitude %>,
          lng: <%= @post.longitude %>,
          title: "<%= j @post.location_name %>"
        };
      </script>
    </div>

    <!-- „Ç≥„É°„É≥„Éà„Çª„ÇØ„Ç∑„Éß„É≥ -->
    <div id="comment-section" class="mt-5">
      <%= render 'public/comments/comments', post: @post %>
    </div>

    <!-- „Éú„Çø„É≥È°û -->
    <% from = params[:from] %>

    <div class="text-center mt-5 mb-5 d-flex flex-column align-items-center">
      <% if @post.user == current_user %>
        <div class="mb-4 d-flex justify-content-center gap-2">
          <%= link_to 'Á∑®ÈõÜ„Åô„Çã', edit_post_path(@post), class: "custom-green-btn" %>
          <%= link_to 'ÂâäÈô§„Åô„Çã', post_path(@post), method: :delete, data: { confirm: 'Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü' }, class: "custom-red-btn" %>
        </div>
      <% end %>

      <% if from == 'mypage' %>
        <%= link_to '„Éû„Ç§„Éö„Éº„Ç∏„Å∏Êàª„Çã', my_page_user_path(current_user), class: "custom-outline-btn mt-2" %>
      <% elsif from == 'search' %>
        <%= link_to 'Ê§úÁ¥¢ÁµêÊûú„Å∏Êàª„Çã', request.referer || search_path, class: "custom-outline-btn mt-2" %>
      <% elsif from == 'genre' %>
        <%= link_to '„Ç∏„É£„É≥„É´Ê§úÁ¥¢„Å∏Êàª„Çã', location_genre_path(@post.location_genre), class: "custom-outline-btn mt-2" %>
      <% elsif from == 'favorites' %>
        <%= link_to '„ÅäÊ∞ó„Å´ÂÖ•„Çä‰∏ÄË¶ß„Å∏Êàª„Çã', favorited_posts_path, class: "custom-outline-btn mt-2" %>
      <% elsif from == 'top' %>
        <%= link_to '„Éà„ÉÉ„Éó„Éö„Éº„Ç∏„Å∏Êàª„Çã', root_path, class: "custom-outline-btn mt-2" %>

      <% elsif from == 'follow_feed' %> 
        <%= link_to '„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„Çã‰∫∫„ÅÆÊäïÁ®ø‰∏ÄË¶ß„Å∏Êàª„Çã', follow_feed_posts_path, class: "custom-outline-btn mt-2" %>
      <% else %>
        <%= link_to 'ÊäïÁ®ø‰∏ÄË¶ß„Å∏Êàª„Çã', posts_path, class: "custom-outline-btn mt-2" %>
      <% end %>

    </div>

  </div>
</div>

<script>
  window.GOOGLE_MAPS_API_KEY = "<%= ENV['Maps_API_Key'] %>";
</script>

<%= javascript_pack_tag 'show_map', 'data-turbolinks-track': 'reload' %>
