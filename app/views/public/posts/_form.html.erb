<%= form_with model: post, local: true, html: { multipart: true } do |f| %>
  <%= render "public/shared/error_messages", resource: post %>

  <table class="table">
    <tbody>
      <tr>
        <th><%= f.label :image, "画像" %></th>
        <td>
          <% if post.image.attached? %>
            <%= image_tag post.image.variant(resize_to_fill: [300, 200]), class: "mb-2", style: "display: block;" %>
          <% end %>
          <%= f.file_field :image, accept: "image/*", class: "form-control" %>
        </td>
      </tr>

      <tr>
        <th><%= f.label :title, "タイトル" %></th>
        <td>
          <%= f.text_field :title, placeholder: "秋の紅葉が美しい登山道", class: "form-control" %>
        </td>
      </tr>

      <tr>
        <th><%= f.label :body, "本文" %></th>
        <td>
          <%= f.text_area :body, placeholder: "標高800mの〇〇山に登りました。展望台からの景色が最高で、紅葉シーズンには特におすすめです。", class: "form-control" %>
        </td>
      </tr>

      <tr>
        <th><%= f.label :prefecture_id, "都道府県" %></th>
        <td><%= f.collection_select :prefecture_id, Prefecture.all, :id, :name, include_blank: "選択してください", class: "form-control" %></td>
      </tr>

      <tr>
        <th><%= f.label :location_genre_id, "場所ジャンル" %></th>
        <td><%= f.collection_select :location_genre_id, LocationGenre.all, :id, :name, include_blank: "選択してください", class: "form-control" %></td>
      </tr>

      <tr>
        <th><%= f.label :location_name, "場所名" %></th>
        <td>
          <%= f.text_field :location_name, placeholder: "〇〇山 第2展望台", class: "form-control" %>
        </td>
      </tr>

      <tr>
        <th><%= f.label :address, "住所" %></th>
        <td>
          <%= f.text_field :address, placeholder: "〇県〇市〇町", class: "form-control" %>
        </td>
      </tr>

      <tr>
        <th><%= f.label :visited_month_id, "訪問月" %></th>
        <td><%= f.collection_select :visited_month_id, VisitedMonth.all, :id, :number, include_blank: "選択してください", class: "form-control" %></td>
      </tr>

      <tr>
        <th><%= f.label :visited_time_zone_id, "訪問時間帯" %></th>
        <td><%= f.collection_select :visited_time_zone_id, VisitedTimeZone.all, :id, :hour, include_blank: "選択してください", class: "form-control" %></td>
      </tr>

      <tr>
        <td colspan="2" class="text-center">
          <% if current_user.email == "guest@example.com" %>
            <p class="mb-2">
              投稿するには、
              <%= link_to "新規登録", destroy_user_session_path + "?redirect_to=sign_up", method: :delete, data: { confirm: "ゲストユーザーをログアウトして新規登録画面へ移動します。よろしいですか？" } %>
              または
              <%= link_to "ログイン", destroy_user_session_path + "?redirect_to=login", method: :delete, data: { confirm: "ゲストユーザーをログアウトしてログイン画面へ移動します。よろしいですか？" } %>
              が必要です。
            </p>
          <% else %>
            <%= f.submit(post.new_record? ? "投稿" : "更新", class: "btn btn-primary") %>
          <% end %>
        </td>
      </tr>

    </tbody>
  </table>
<% end %>
