<h1 class="text-center my-5">投稿一覧</h1>

<% if @posts.present? %>
  <div class="d-flex justify-content-center">
    <div class="table-responsive" style="max-width: 1100px; width: 100%;">
      <table class="table table-hover text-center">
        <thead class="table-light align-middle">
          <tr>
            <th class="align-middle">ID</th>
            <th class="align-middle">画像</th>
            <th class="align-middle">タイトル</th>
            <th class="align-middle">投稿者</th>
            <th class="align-middle">投稿日</th>
            <th class="align-middle"></th>
          </tr>
        </thead>
        <tbody>
          <% @posts.each do |post| %>
            <tr>
              <td class="align-middle"><%= post.id %></td>
              <td class="align-middle">
                <% if post.image.attached? %>
                  <%= image_tag post.image.variant(resize_to_limit: [100, 100]), class: "img-thumbnail" %>
                <% else %>
                  <%= image_tag "no_image.jpg", width: 100, height: 100, class: "img-thumbnail" %>
                <% end %>
              </td>
              <td class="align-middle">
                <%= link_to post.title, admin_post_path(post), class: "text-decoration-none fw-bold" %>
              </td>
              <td class="align-middle">
                <%= link_to post.user.nickname, admin_user_path(post.user), class: "text-decoration-none" %>
              </td>
              <td class="align-middle"><%= post.created_at.strftime("%Y/%m/%d %H:%M") %></td>
              <td class="align-middle">
                <%= link_to "削除", admin_post_path(post),
                            method: :delete,
                            data: { confirm: "本当に削除しますか？" },
                            class: "custom-red-btn btn-sm" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <p class="text-center">投稿はまだありません。</p>
<% end %>
