<h1 class="text-center my-5">コメント一覧</h1>

<% if @comments.present? %>
  <div class="d-flex justify-content-center">
    <div class="table-responsive" style="max-width: 1100px; width: 100%;">
      <table class="table table-hover text-nowrap">
        <thead class="table-light">
          <tr>
            <th class="align-middle">ID</th>
            <th class="align-middle">投稿画像</th>
            <th class="align-middle">投稿タイトル</th>
            <th class="align-middle">投稿者</th>
            <th class="align-middle">投稿日</th>
            <th class="align-middle">コメント内容</th>
            <th class="align-middle">コメント者</th>
            <th class="align-middle">コメント日</th>
            <th class="align-middle"></th>
          </tr>
        </thead>
        <tbody>
          <% @comments.each do |comment| %>
            <tr>
              <td class="align-middle"><%= comment.id %></td>

              <td class="align-middle">
                <% if comment.post.image.attached? %>
                  <%= image_tag comment.post.image.variant(resize_to_limit: [100, 100]), class: "img-thumbnail", alt: "投稿画像" %>
                <% else %>
                  <%= image_tag "no_image.jpg", width: 100, height: 100, class: "img-thumbnail", alt: "No image" %>
                <% end %>
              </td>

              <td class="align-middle">
                <%= link_to comment.post.title, admin_post_path(comment.post), class: "text-decoration-none" %>
              </td>

              <td class="align-middle">
                <%= link_to comment.post.user.nickname, admin_user_path(comment.post.user), class: "text-decoration-none" %>
              </td>

              <td class="align-middle"><%= comment.post.created_at.strftime("%Y/%m/%d %H:%M") %></td>
              <td class="align-middle"><%= simple_format(comment.body) %></td>

              <td class="align-middle">
                <%= link_to comment.user.nickname, admin_user_path(comment.user), class: "text-decoration-none" %>
              </td>

              <td class="align-middle"><%= comment.created_at.strftime("%Y/%m/%d %H:%M") %></td>

              <td class="align-middle">
                <%= link_to "削除", admin_comment_path(comment),
                            method: :delete,
                            data: { confirm: "本当に削除しますか？" },
                            class: "custom-red-btn btn-sm" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <p class="text-center">コメントはまだありません。</p>
<% end %>
